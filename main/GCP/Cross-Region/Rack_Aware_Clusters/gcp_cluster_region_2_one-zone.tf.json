{
    "provider": {
        "google": {
            "project": "${var.project_2}",
            "region": "${var.region_2_name}",
            "credentials": "${file(\"${var.credentials_2}\")}",
            "alias": "provider2"
        }
    },
    "module": {
        "network-vpc-2": {
            "source": "../../../../modules/gcp/network",
            "name": "${var.deployment_name}-${var.env2}",
            "region": "${var.region_2_name}",
            "resource_tags" : {},
            "public_subnets_cidrs": "${var.rs_public_subnets_2}",
            "private_subnets_cidrs": {},
            "providers": {
                "google": "google.provider2"
            }
        },
        "rs-cluster-2": {
            "source": "../../../../modules/gcp/re",
            "name": "${var.deployment_name}-${var.env2}",
            "worker_count": "${var.cluster_size}",
            "machine_type": "${var.machine_type}",
            "machine_image": "${var.machine_image}",
            "resource_tags" : {},
            "ssh_user": "${var.ssh_user}",
            "ssh_public_key": "${var.ssh_public_key}",
            "availability_zones": "${keys(var.rs_public_subnets_2)}",
            "rack_aware" : "${var.rack_aware}",
            "subnets": "${module.network-vpc-2.public-subnets}",
            "cluster_dns" : "cluster.${var.env2}-${var.deployment_name}.${var.hosted_zone}",
            "redis_distro" : "${var.rs_release}",
            "boot_disk_size" : "${var.volume_size}",
            "redis_user" : "${var.rs_user}",
            "redis_password" : "${var.rs_password}",
            "providers": {
                "google": "google.provider2"
            }
        },
        "rs-cluster-2-dns": {
            "source": "../../../../modules/gcp/ns",
            "subdomain": "${var.env2}-${var.deployment_name}",
            "hosted_zone_name": "${var.hosted_zone_name}",
            "hosted_zone": "${var.hosted_zone}",
            "resource_tags": {},
            "ip_addresses": "${module.rs-cluster-2.re-public-ips}",
            "providers": {
                "google": "google.provider2"
            }
        },
        "peering-vpc2-vpc1": {
            "source": "../../../../modules/gcp/peering",
            "name": "${var.deployment_name}-${var.env2}-${var.env1}",
            "requester_vpc": "${module.network-vpc-2.raw_vpc}",
            "peer_vpc": "${module.network-vpc-1.raw_vpc}"
        }
    },
    "output": {
        "rs-cluster-2-public-ips": {
            "value": "${module.rs-cluster-2.re-public-ips}"
        },
        "rs-cluster-2-nodes-dns": {
            "value": "${module.rs-cluster-2-dns.A-records}"
        },
        "rs-cluster-2-ui-dns": {
            "value": ["https://${module.rs-cluster-2-dns.cluster_master_dns}:8443",
                  "https://${module.rs-cluster-2-dns.cluster_dns}:8443"]
        } 
    }
}
